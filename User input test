#include <hidef.h>      /* common defines and macros */
#include "derivative.h"      /* derivative-specific definitions */

 unsigned char period1 = 25;   /*The periods of the frequencies generated by each button*/
unsigned char period2 = 27;
unsigned char period3 = 30;
unsigned char period4 = 40;
unsigned char period5 = 50;
unsigned char period6 = 60;
unsigned char period7 = 70;
unsigned char period8 = 80;
unsigned int sequenceSpeed = 30000;
unsigned char userLose;
uint flashTime = 150;

void wait(ulong iteration)

{                               /*wait function to create a timer*/  
	while( iteration > 0)
	{
		--iteration;
	}
}

void tone(uint period){
uint k;
  for(k=0; k<flashTime;k++){
    
    PORTE = 0b00000100;
    wait(period);
    PORTE = 0b00000000;
    wait(period);
  }
}
  
              

void main(void) {
  /* put your own code here */
  
               
               uchar j=0;
               uchar UserInput [100];
               uchar level=3;
               DDRB=0x00;
               DDRA=0xFF;
               
               
                 for(j=0;j<101;j++)
                 UserInput[j]=1;
	                                   


  for(;;) { 
                  for(j=0;j<= level ; ) {
                   switch(PORTB)          /*switch statement assigns an LED to the 0-7 values*/
  {
      case 0b11111010 :
         UserInput[j]=0;
         tone(period1);
         PORTA = 0x01;
         j++;
         break;
      case 0b11111001:
        UserInput[j]=1;
         tone(period2);
         PORTA = 0x02;
         j++;
         break;
     /* case 0b11111011 :
         UserInput[j]=2;
         tone(period3);
         PORTA = 0x04;
         j++;
         break; */            /*push button 3 is not working  */
      case 0b11110011 :
         UserInput[j]=3;
         tone(period4);
         PORTA = 0x08;
         j++;
         break;
      case 0b11101011 :
         UserInput[j]=4;
         tone(period5);
         PORTA = 0x10;
         j++;
         break;
      case 0b11011011 :
         UserInput[j]=5;
         tone(period6);
         PORTA = 0x20;
         j++;
         break;
      case  0b10111011:
        UserInput[j]=6;
         tone(period7);
         PORTA = 0x40;
         j++;
         break;
      case 0b01111011 :
         UserInput[j]=7;
         tone(period8);
         PORTA = 0x80;
         j++;
         break;   
      default:
      PORTA=0x00;
      break;
  }
                
                     
                
                    
                   /*check timer here*/
                
               } 
               
               //PORTA=PORTB; 
                } /* loop forever */
                
                
  /* please make sure that you never leave main */
}
